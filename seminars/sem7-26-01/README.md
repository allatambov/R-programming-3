Семинар 7
================
Алла Тамбовцева
26 января 2018 г

*Disclaimer.* База данных для работы на семинаре немного странная. Идея взять такую базу взята [отсюда](http://koaning.io/fun-datasets.html). База данных взята из питоновского ноутбука [Ramiro Gómez](http://nbviewer.jupyter.org/github/yaph/ipython-notebooks/blob/master/movie-body-counts.ipynb).

1.  Загрузите в R базу данных по фильмам `filmdeathcounts.csv`, в которой содержатся следующие переменные:

    -   Film - название фильма
    -   Year - год выхода фильма
    -   Body\_Count - число смертей в фильме
    -   MPAA\_Rating - рейтинг фильма
    -   Genre - жанр фильма
    -   Director - режиссер фильма
    -   Length\_Minutes - продолжительность фильма в минутах
    -   IMDB\_Rating - рейтинг фильма

2.  Удалите из базы пропущенные значения. Оставьте в базе данных только наблюдения с 1989 по 2010 год включительно.

3.  Сколько различных жанров фильмов представлено в базе (имеются в виду сочетания жанров)?

4.  Добавьте в базу данных столбец Genre\_abb, который представляет собой сокращенные названия для жанров. Используйте функцию `abbreviate()`.

5.  Сколько в базе данных фильмов разных лет выпуска? Постройте график, иллюстрирующий распределение фильмов по годам. Скорректируйте оси (используйте аргумент `las`, чтобы подписи по оси x были повернуты на 90 градусов и не перекрывали друг друга). Добавьте заголовок графика, поменяйте цвет.

6.  Постройте гистограмму для переменной Length\_Minutes. Наложите график плотности нормального распределения с соответствующими параметрами.

7.  Постройте диаграмму рассеяния для переменных Body\_Count и IMDB\_Rating. Что можно сказать о связи между этими переменными, глядя на график?

8.  Как Вы думаете, какой коэффициент корреляции лучше использовать для оценки связи между переменными Body\_Count и IMDB\_Rating? Посчитайте соответствующий коэффициент корреляции между этими переменными. Проверьте гипотезу о равенстве истинного коэффициента корреляции нулю. Сделайте выводы.

9.  Сгруппируйте наблюдения по переменной Year. Используя знания о структуре выдачи `cor.test()`, создайте такую таблицу (приведены первые три строки):

    <table style="text-align:center">
    <tr>
    <td colspan="4" style="border-bottom: 1px solid black">
    </td>
    </tr>
    <tr>
    <td style="text-align:left">
    </td>
    <td>
    Year
    </td>
    <td>
    corr
    </td>
    <td>
    pvalue
    </td>
    </tr>
    <tr>
    <td colspan="4" style="border-bottom: 1px solid black">
    </td>
    </tr>
    <tr>
    <td style="text-align:left">
    1
    </td>
    <td>
    1989
    </td>
    <td>
    0.12
    </td>
    <td>
    0.587
    </td>
    </tr>
    <tr>
    <td style="text-align:left">
    2
    </td>
    <td>
    1990
    </td>
    <td>
    0.1
    </td>
    <td>
    0.276
    </td>
    </tr>
    <tr>
    <td style="text-align:left">
    3
    </td>
    <td>
    1991
    </td>
    <td>
    -0.26
    </td>
    <td>
    0.877
    </td>
    </tr>
    <tr>
    <td colspan="4" style="border-bottom: 1px solid black">
    </td>
    </tr>
    </table>
    В какие годы наблюдается статистически значимая корреляция между показателями?

10. Фильмы какого жанра/жанров наиболее жестокие (содержат наибольшее число смертей)? А какие режиссеры наименее жестокие? Назовите 5 первых "самых добрых" режиссеров.

11. Создайте переменную Death\_Min - число смертей, приходящихся на одну минуту фильма. Какой фильм лидирует по этому показателю?
